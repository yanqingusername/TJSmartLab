{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-4c3f\"],{16:function(e,t){},31:function(e,t){},32:function(e,t){},33:function(e,t){},34:function(e,t){},35:function(e,t){},\"5QaP\":function(e,t,i){\"use strict\";i.r(t);var a=i(\"hY44\"),o=(i(\"vDqi\"),{components:{pdf:a.a},data:function(){return{url1:\"http://xmr.coyotebio-lab.com:8080/lislab\",rules:{fileName:[{required:!0,message:\"请输入资质名称\",trigger:\"blur\"},{min:1,max:20,message:\"长度在 1 到 20 个字符\",trigger:\"blur\"}],fileType:[{required:!0,message:\"请选择资质类型\",trigger:\"blur\"}],file:[{required:!1,message:\"请选择文件\",trigger:\"blur\"}]},pdfUrl:\"\",numPages:[],fileArr:[],upLoadImgUrl:\"\",form:{position:\"\"},Lab:{fileName:\"\",fileType:\"\",upLoadImgUrl:\"\",pdfUrl:\"\"},fileType:[{id:1,type:\"营业执照\"},{id:2,type:\"管理制度\"},{id:3,type:\"质量部\"}]}},created:function(){},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log(\"error submit!!!\"),!1;t.submitUpload()})},submitUpload:function(){this.$refs.upload.submit()},uploadUrl:function(){return\"http://lisalarm.coyotebio-lab.com:9000/admin/smartLab/uploadLabAptitude.hn?fileName=\"+this.Lab.fileName+\"&fileType=\"+this.Lab.fileType},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(\".\")+1);if(e.size/1024/1024<10||(this.$message.error(\"上传文件大小不能超过 10MB!\"),console.log(\"上传文件大小不能超过 10MB!\")),-1===[\"pdf\",\"jpg\",\"jpeg\",\"png\"].indexOf(t))return this.$msg(\"上传文件只能是 pdf、jpg、jpeg、png\",\"error\"),!1},imgPreview:function(e){this.fileArr=[],this.fileArr.push(e),this.form.position=\"\",console.log(e),this.form.position=e.name;var t=e.name;console.log(\"打印file大小\"),console.log(e.size),e.size/1024/1024<10||(this.$message.error(\"上传文件大小不能超过 10MB!\"),console.log(\"上传文件大小不能超过 10MB!\")),/(.jpg|.jpeg|.gif|.png|.pdf)$/.test(t.toLowerCase())?(this.Lab.upLoadImgUrl=URL.createObjectURL(e.raw),this.Lab.pdfUrl=this.getPdfUrl(e),console.log(\"========>\",this.upLoadImgUrl),console.log(\"--------\\x3e\",this.pdfUrl)):this.$message.error(\"请选择图片或pdf文件\")},upSuccess:function(e){this.$message({message:\"上传成功\",type:\"success\"}),this.$router.push({path:\"/smartLab/labAptitude\"})},upError:function(e){this.$message({message:\"上传失败\",type:\"error\"})},getPdfUrl:function(e){var t=this,i=window.URL.createObjectURL(e.raw);return a.a.createLoadingTask(i).promise.then(function(e){t.numPages=e.numPages,console.log(\"numPages\",t.numPages)}).catch(function(e){console.error(\"pdf 加载失败\",e)}),i}}}),l=(i(\"YO1w\"),i(\"KHd+\")),r=Object(l.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"app-container\"},[i(\"el-form\",{ref:\"Lab\",attrs:{\"label-width\":\"120px\",model:e.Lab,enctype:\"multipart/form-data\",rules:e.rules}},[i(\"el-form-item\",{staticStyle:{width:\"auto\",\"padding-top\":\"20px\"},attrs:{label:\"资质名称\",prop:\"fileName\"}},[i(\"el-input\",{staticStyle:{width:\"30%\"},attrs:{placeholder:\"请输入文件名称\"},model:{value:e.Lab.fileName,callback:function(t){e.$set(e.Lab,\"fileName\",t)},expression:\"Lab.fileName\"}})],1),e._v(\" \"),i(\"el-form-item\",{staticStyle:{\"padding-top\":\"20px\"},attrs:{label:\"资质类型\",prop:\"fileType\"}},[i(\"el-select\",{attrs:{placeholder:\"请选择文件类型\"},model:{value:e.Lab.fileType,callback:function(t){e.$set(e.Lab,\"fileType\",t)},expression:\"Lab.fileType\"}},e._l(e.fileType,function(e){return i(\"el-option\",{key:e.id,attrs:{label:e.type,value:e.type}})}))],1),e._v(\" \"),i(\"el-form-item\",{staticStyle:{width:\"auto\",\"padding-top\":\"20px\"},attrs:{label:\"选择文件\",prop:\"file\"}},[i(\"el-upload\",{ref:\"upload\",staticClass:\"upload-demo\",staticStyle:{width:\"30%\"},attrs:{accept:\".pdf, .jpg, .jpeg, .png\",action:e.uploadUrl(),\"file-list\":e.fileArr,data:e.uploadData,\"show-file-list\":!1,\"auto-upload\":!1,\"before-upload\":e.beforeUpload,\"on-success\":e.upSuccess,\"on-error\":e.upError,\"on-change\":e.imgPreview,name:\"file\",showFileList:!0}},[i(\"el-button\",{staticClass:\"upload-input\",staticStyle:{width:\"200px\",height:\"40px\"}},[e._v(\"\\n          点击选择上传文件\\n        \")])],1)],1),e._v(\" \"),i(\"el-form-item\",[i(\"el-button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"success\"},on:{click:function(t){e.submitForm(\"Lab\")}}},[e._v(\"保存\")]),e._v(\" \"),i(\"router-link\",{attrs:{to:\"/smartLab/labAptitude\"}},[i(\"el-button\",{staticStyle:{\"margin-left\":\"15px\"}},[e._v(\"取消\")])],1)],1)],1)],1)},[],!1,null,null,null);r.options.__file=\"labAptitudeAdd.vue\";t.default=r.exports},YO1w:function(e,t,i){\"use strict\";var a=i(\"difL\");i.n(a).a},difL:function(e,t,i){}}]);","extractedComments":[]}