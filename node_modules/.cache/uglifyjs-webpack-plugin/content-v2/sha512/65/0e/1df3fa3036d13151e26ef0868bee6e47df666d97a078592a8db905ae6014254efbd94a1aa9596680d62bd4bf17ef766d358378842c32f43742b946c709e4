{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-2df7\"],{\"2Fn3\":function(e,t,n){\"use strict\";var a=n(\"t3Un\");t.a={getScheduleList:function(e,t,n){return Object(a.a)({url:\"admin/channelsch/findPageSchedule/\"+e+\"/\"+t,method:\"post\",data:n})},deleteSchedule:function(e){return Object(a.a)({url:\"/admin/channelsch/\"+e,method:\"delete\"})},batchRemoveSchedule:function(e){return Object(a.a)({url:\"/admin/channelsch/batchRemove\",method:\"delete\",data:e})},lockSchedule:function(e,t){return Object(a.a)({url:\"/admin/channelsch/lockSchedulet/\"+e+\"/\"+t,method:\"put\"})},saveSchedule:function(e){return Object(a.a)({url:\"/admin/channelsch/saveSchedule\",method:\"post\",data:e})},getSchedule:function(e){return Object(a.a)({url:\"/admin/channelsch/findSchedulebyId/\"+e,method:\"get\"})},updateSchedule:function(e){return Object(a.a)({url:\"/admin/channelsch/updateSchedule\",method:\"post\",data:e})},getClassName:function(e){return Object(a.a)({url:\"/admin/channelsch/getClassName/\"+e,method:\"get\"})}}},\"7wSY\":function(e,t,n){},KTTK:function(e,t,n){\"use strict\";var a=n(\"t3Un\");t.a={getChannelNameList:function(){return Object(a.a)({url:\"http://localhost:8070/lis_appointment_war_exploded/admin/channel/getChannelNameList.hn\",method:\"get\"})},getAllCity:function(){return Object(a.a)({url:\"/admin/common/getAllCity\",method:\"post\"})},getAllArea:function(){return Object(a.a)({url:\"/admin/common/getAllArea\",method:\"get\"})},getAllChannel:function(e){return Object(a.a)({url:\"/admin/common/getAllChannel/\"+e,method:\"post\"})},getPhone:function(e){return Object(a.a)({url:\"/admin/common/getPhone\",method:\"get\",params:{samplingLeader:e}})},getAllLab:function(e){return Object(a.a)({url:\"/admin/common/getAllLab/\"+e,method:\"get\"})},getAllLeader:function(){return Object(a.a)({url:\"/admin/common/getAllLeader\",method:\"get\"})},getAllpaytype:function(){return Object(a.a)({url:\"/admin/common/getAllPaytype\",method:\"get\"})},getAllsource:function(){return Object(a.a)({url:\"/admin/common/getAllSource\",method:\"get\"})}}},\"gDS+\":function(e,t,n){e.exports={default:n(\"oh+g\"),__esModule:!0}},iqlU:function(e,t,n){\"use strict\";var a=n(\"7wSY\");n.n(a).a},l5T0:function(e,t,n){\"use strict\";n.r(t);var a=n(\"gDS+\"),l=n.n(a),s=n(\"2Fn3\"),c=n(\"KTTK\"),r=n(\"X4fA\"),i={data:function(){return{dialogFormVisible:!1,channelSchedule:{classesName:\"\",createPerson:\"\",create_time_start:\"\",create_time_end:\"\",classesChannelNames:[],classesChannelIds:[]},channelList:[],classesnames:[],name:\"\",time:\"\",rules:{classesName:[{required:!0,message:\"请输入班次名称\",trigger:\"blur\"}],classes_time:[{required:!0,message:\"请输入班次时间\",trigger:\"blur\"}],classes_time_start:[{required:!0,message:\"请输入起始时间\",trigger:\"blur\"}],classes_time_end:[{required:!0,message:\"请输入结束时间\",trigger:\"blur\"}],classesChannelNames:[{required:!0,message:\"请输入最少一个采样点\",trigger:\"change\"}],createPerson:[{required:!0,message:\"请输入创建人\",trigger:\"blur\"}]}}},created:function(){var e=this.$route.query;console.log(e),e&&(this.channelSchedule=e.schedule),this.resolveData1(),this.getChannel()},methods:{updatePerson:function(){var e=this;s.a.updateSchedule(this.formData).then(function(t){200==t.code?(e.$message({message:\"修改成功\",type:\"success\"}),e.$router.push({path:\"/point/scheduling\"})):201==t.code&&e.$message({message:t.data,type:\"error\"})})},getChannel:function(){var e=this;c.a.getAllChannel(Object(r.a)()).then(function(t){e.channelList=t.data}).catch(function(e){console.log(e)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log(\"error submit!!!\"),!1;console.log(t.channelSchedule),t.resolveData2(),t.updatePerson()})},resolveData1:function(){this.channelSchedule.classesChannelNames=this.channelSchedule.classesChannelNames.split(\",\"),this.channelSchedule.classesChannelIds=this.channelSchedule.classesChannelIds.split(\",\"),this.channelSchedule.classes_time_start=this.channelSchedule.classesTime.split(\"-\")[0],this.channelSchedule.classes_time_end=this.channelSchedule.classesTime.split(\"-\")[1]},resolveData2:function(){var e=this;this.formData=JSON.parse(l()(this.channelSchedule));var t=[];this.channelList.forEach(function(n){e.formData.classesChannelNames.indexOf(n.channelName)>-1&&t.push(n.channelId)}),this.formData.classesChannelIds=t.join(\",\"),this.formData.classesChannelNames=this.formData.classesChannelNames.toString(),this.formData.classesTime=this.formData.classes_time_start+\"-\"+this.formData.classes_time_end},resetForm:function(e){this.$refs[e].resetFields(),this.$router.push({path:\"/point/scheduling\"})}}},o=(n(\"iqlU\"),n(\"KHd+\")),h=Object(o.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"el-form\",{ref:\"channelSchedule\",attrs:{inline:!0,model:e.channelSchedule,rules:e.rules,\"label-width\":\"180px\"}},[n(\"el-form-item\",{staticStyle:{width:\"58%\"},attrs:{label:\"班次名称\",prop:\"classesName\"}},[n(\"el-input\",{model:{value:e.channelSchedule.classesName,callback:function(t){e.$set(e.channelSchedule,\"classesName\",t)},expression:\"channelSchedule.classesName\"}})],1),e._v(\" \"),n(\"el-form-item\",{staticStyle:{width:\"58%\"},attrs:{label:\"创建人\",prop:\"createPerson\"}},[n(\"el-input\",{attrs:{disabled:!0},model:{value:e.channelSchedule.createPerson,callback:function(t){e.$set(e.channelSchedule,\"createPerson\",t)},expression:\"channelSchedule.createPerson\"}})],1),e._v(\" \"),n(\"el-form-item\",{staticStyle:{width:\"58%\"},attrs:{label:\"班次时间\",required:\"\"}},[n(\"el-col\",{attrs:{span:11}},[n(\"el-form-item\",{attrs:{prop:\"classes_time_start\"}},[n(\"el-time-select\",{attrs:{placeholder:\"起始时间\",\"picker-options\":{start:\"00:00\",step:\"00:30\",end:\"24:00\"}},on:{input:function(t){e.$forceUpdate()}},model:{value:e.channelSchedule.classes_time_start,callback:function(t){e.$set(e.channelSchedule,\"classes_time_start\",t)},expression:\"channelSchedule.classes_time_start\"}})],1)],1),e._v(\" \"),n(\"el-col\",{staticClass:\"line\",attrs:{span:2}},[e._v(\"-\")]),e._v(\" \"),n(\"el-col\",{attrs:{span:11}},[n(\"el-form-item\",{attrs:{prop:\"classes_time_end\"}},[n(\"el-time-select\",{attrs:{placeholder:\"结束时间\",\"picker-options\":{start:\"00:00\",step:\"00:30\",end:\"24:00\"}},on:{input:function(t){e.$forceUpdate()}},model:{value:e.channelSchedule.classes_time_end,callback:function(t){e.$set(e.channelSchedule,\"classes_time_end\",t)},expression:\"channelSchedule.classes_time_end\"}})],1)],1)],1),e._v(\" \"),n(\"el-form-item\",{staticStyle:{width:\"58%\"},attrs:{label:\"适用采样点\",prop:\"classesChannelNames\"}},[n(\"el-select\",{staticStyle:{width:\"200%\"},attrs:{filterable:\"\",placeholder:\"请选择采样点\",multiple:\"\"},model:{value:e.channelSchedule.classesChannelNames,callback:function(t){e.$set(e.channelSchedule,\"classesChannelNames\",t)},expression:\"channelSchedule.classesChannelNames\"}},e._l(e.channelList,function(e){return n(\"el-option\",{key:e.channelId,attrs:{label:e.channelName,value:e.channelName}})}))],1),e._v(\" \"),n(\"el-footer\",[n(\"el-form-item\",{staticStyle:{\"margin-left\":\"250px\"}},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.submitForm(\"channelSchedule\")}}},[e._v(\"保存\")]),e._v(\" \"),n(\"el-button\",{on:{click:function(t){e.resetForm(\"channelSchedule\")}}},[e._v(\"取消\")])],1)],1)],1)},[],!1,null,null,null);h.options.__file=\"updatesch.vue\";t.default=h.exports},\"oh+g\":function(e,t,n){var a=n(\"WEpk\"),l=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}}}]);","extractedComments":[]}