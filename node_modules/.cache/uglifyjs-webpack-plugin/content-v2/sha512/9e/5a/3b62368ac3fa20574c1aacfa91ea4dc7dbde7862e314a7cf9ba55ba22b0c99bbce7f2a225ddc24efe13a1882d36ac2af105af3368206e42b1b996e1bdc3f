{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-f6a9\"],{\"2vCt\":function(e,t,n){},FF0w:function(e,t,n){\"use strict\";n.r(t);var a=n(\"gDS+\"),o=n.n(a),i=n(\"GQeE\"),l=n.n(i),s=n(\"reOz\"),r=n(\"KTTK\"),u=n(\"X4fA\"),c={data:function(){var e=this;return{dialogPanKong:!1,pankong:!1,rules1:{routeName:[{required:!0,message:\"请填写路线名\",trigger:\"blur\"}]},rules:{startTime:[{required:!0,message:\"请选择开始时间\",trigger:\"change\"}],endTime:[{required:!0,message:\"请选择结束时间\",trigger:\"change\"}],objective:[{required:!0,message:\"请选择目的\",trigger:\"change\"}],site:[{required:!0,message:\"请选择节点\",trigger:\"change\"}]},routeId:0,routeName:\"\",startTime:\"\",endTime:\"\",dialogSave:!1,i:1,rowsIndex:1,columnsIndex:\"\",chuan:{startTime:\"\",endTime:\"\",objective:\"\",site:\"\"},dialogVisible:!1,issiteType:\"0\",SaveRoute:{},rowsdata:[{1:{}}],columnIndex:1,lab:{},channel:{},tabheight:0,columndata:[{title:\"名称\",key:\"name\",width:150,fixed:\"left\",resizable:!0,render:function(e,t){return e(\"div\",[e(\"Input\",{props:{placeholder:\"车辆\"+(t.index+1),disabled:!0},style:{width:\"75%\",float:\"left\"}})])}},{title:\"途径站点/时间/目的\",key:\"1\",width:240,resizable:!0,render:function(t,n){var a=n.index+1;return t(\"div\",{on:{click:function(){e.dialogVisible=!0,console.log(a),e.rowsIndex=a,e.columnsIndex=n.column.key,e.lieIndex=n.column.key.split(\"value\")[1],console.log(\"----\\x3e:\",n.column.key.split(\"value\")[1])}}},[null==e.rowsdata[a-1][n.column.key].time&&null==e.rowsdata[a-1][n.column.key].site&&null==e.rowsdata[a-1][n.column.key].objective?t(\"p\",{style:{color:\"#D3D3D3\"}},\"点击此处添加关键点\"):t(\"div\",{},[t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].time),t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].site),t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].objective)])])},renderHeader:function(t,n){var a=e;return t(\"div\",[t(\"Input\",{props:{value:n.column.title,disabled:!0},style:{width:\"70%\",float:\"left\"},on:{\"on-change\":function(e){a.columndata[n.index]=n.column}}})])}}]}},created:function(){if(this.selectAllLab(),this.selectAllChannel(),this.$route.params&&this.$route.params.id){var e=this.$route.params.id;this.SaveRoute.id=e,this.pankong=!0,console.log(\"======>888\",this.SaveRoute.id),this.getRouteById(e)}},methods:{close:function(){this.chuan={startTime:\"\",endTime:\"\",objective:\"\",site:\"\"},this.$refs.chuan&&this.$refs.chuan.resetFields(),this.dialogVisible=!1},changeSite:function(){this.chuan.site=\"\"},submitForm1:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log(\"error submit!!!\"),!1;console.log(t.scheduleSet),t.saveRoute()})},yancun:function(){1==this.pankong?this.dialogSave=!0:this.dialogPanKong=!0},back:function(){this.$router.push({path:\"/car/route/list\"})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log(\"error submit!!!\"),!1;console.log(t.scheduleSet),t.addSite(),t.pankong=!0})},exportData:function(){console.log(\"调用了导出\"),this.$refs.table.exportCsv({filename:\"The original data\",columns:this.columndata,data:this.rowsdata})},beginCloumn:function(){var e=this;this.columnIndex++;var t={title:\"途径站点/时间/目的\",key:this.columnIndex,width:240,resizable:!0,render:function(t,n){var a=n.index+1;return t(\"div\",{on:{click:function(){e.dialogVisible=!0,console.log(a),e.rowsIndex=a,e.columnsIndex=n.column.key,e.lieIndex=n.column.key.split(\"value\")[1],console.log(\"----\\x3e:\",n.column.key.split(\"value\")[1])}}},[null==e.rowsdata[a-1][n.column.key].time&&null==e.rowsdata[a-1][n.column.key].site&&null==e.rowsdata[a-1][n.column.key].objective?t(\"p\",{style:{color:\"#D3D3D3\"}},\"点击此处添加关键点\"):t(\"div\",{},[t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].time),t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].site),t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].objective)])])},renderHeader:function(t,n){var a=e;return t(\"div\",[t(\"Input\",{props:{value:n.column.title,disabled:!0},style:{width:\"70%\",float:\"left\"},on:{\"on-change\":function(e){n.column.title=e.target.value,a.columndata[n.index]=n.column}}})])}};this.columndata.push(t),console.log(this.rowsdata)},getRouteById:function(e){var t=this;s.a.getRouteById(e).then(function(e){t.rowsdata=JSON.parse(e.data);for(var n=t.rowsdata,a=0,o=t.rowsdata[0],i=0;i<n.length;i++){var s=t.rowsdata[i],r=l()(s);r.length>a&&(a=r.length,console.log(\"0099999888888\",a))}if(\"personName\"in o){console.log(\"-000000--------\");for(var u=0;u<a-3;u++)t.beginCloumn()}else{console.log(\"0000000000000000000\");for(var c=0;c<a-1;c++)t.beginCloumn()}console.log(\"==================>>>\",t.rowsdata)})},saveRoute:function(){var e=this;this.dialogSave=!1,this.SaveRoute.createPerson=Object(u.a)(),this.SaveRoute.rowsdata=this.rowsdata,console.log(this.rowsdata),s.a.saveRoute(this.SaveRoute).then(function(t){200==t.code?(e.$message({message:\"添加成功\",type:\"success\"}),e.$router.push({path:\"/car/route/list\"})):201==t.code&&e.$message({message:\"路线名已存在\",type:\"error\"})}).catch(function(e){console.log(e)})},addSite:function(){console.log(\"172387128\",this.rowsIndex,this.columnsIndex);var e=[];this.chuan.startTime==this.chuan.endTime?this.chuan.time=this.chuan.startTime:this.chuan.time=this.chuan.startTime+\"-\"+this.chuan.endTime,this.rowsdata[this.rowsIndex-1][this.columnsIndex]={time:this.chuan.time,objective:this.chuan.objective,site:this.chuan.site},e=this.rowsdata,this.rowsdata=[],this.rowsdata=e,e=[],this.$refs.chuan&&this.$refs.chuan.resetFields(),this.chuan={startTime:\"\",endTime:\"\",objective:\"\",site:\"\"},this.dialogVisible=!1,this.startTime=\"\",this.endTime=\"\",console.log(\"----\\x3e:\",this.rowsdata,\"123123\",this.rowsdata[this.rowsIndex-1][this.columnsIndex])},selectAllLab:function(){var e=this;r.a.getAllLab(Object(u.a)()).then(function(t){e.lab=t.data})},selectAllChannel:function(){var e=this;r.a.getAllChannel(Object(u.a)()).then(function(t){e.channel=t.data})},AddRow:function(){var e=JSON.parse(o()(this.rowsdata[0]));for(var t in e)e[t]=\"name\"==t?\"车辆\"+this.rowsdata.length:{};this.rowsdata.push(e),console.log(this.rowsdata)},AddColumn:function(){var e=this;this.columnIndex++;var t=this.columnIndex;this.rowsdata.forEach(function(e,n){e[t]={}});var n={title:\"途径站点/时间/目的\",key:t,width:240,resizable:!0,render:function(t,n){var a=n.index+1;return t(\"div\",{on:{click:function(){e.dialogVisible=!0,console.log(a),e.rowsIndex=a,e.columnsIndex=n.column.key,e.lieIndex=n.column.key.split(\"value\")[1],console.log(\"----\\x3e:\",n.column.key.split(\"value\")[1])}}},[null==e.rowsdata[a-1][n.column.key].time&&null==e.rowsdata[a-1][n.column.key].site&&null==e.rowsdata[a-1][n.column.key].objective?t(\"p\",{style:{color:\"#D3D3D3\"}},\"点击此处添加关键点\"):t(\"div\",{},[t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].time),t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].site),t(\"p\",{},\"\"+e.rowsdata[a-1][n.column.key].objective)])])},renderHeader:function(t,n){var a=e;return t(\"div\",[t(\"Input\",{props:{value:n.column.title,disabled:!0},style:{width:\"70%\",float:\"left\"},on:{\"on-change\":function(e){n.column.title=e.target.value,a.columndata[n.index]=n.column}}})])}};this.columndata.push(n),console.log(this.rowsdata)}},mounted:function(){this.tabheight=.8*window.innerHeight}},d=(n(\"ntmb\"),n(\"KHd+\")),m=Object(d.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"edit-box\"},[n(\"div\",{staticClass:\"botom-box\"},[n(\"el-link\",{attrs:{type:\"danger\"}},[e._v(\"一行代表一条路线\")]),e._v(\" \"),n(\"el-link\",{attrs:{type:\"danger\"}},[e._v(\"请从左侧开始并连续设置转运点\")]),e._v(\" \"),n(\"Button\",{attrs:{type:\"primary\",size:\"large\"},on:{click:e.AddRow}},[e._v(\"增加路线\")]),e._v(\" \"),n(\"Button\",{attrs:{type:\"primary\",size:\"large\"},on:{click:e.AddColumn}},[e._v(\"增加转运点\")]),e._v(\" \"),n(\"Button\",{attrs:{type:\"success\",size:\"large\"},on:{click:e.yancun}},[e._v(\"保存此路线\")]),e._v(\" \"),n(\"Button\",{attrs:{type:\"error\",size:\"large\"},on:{click:e.back}},[e._v(\"取消\")])],1),e._v(\" \"),n(\"div\",{ref:\"tabdiv\",staticClass:\"data-box\"},[n(\"Table\",{ref:\"table\",staticClass:\"table-css\",attrs:{height:e.tabheight,border:\"\",columns:e.columndata,data:e.rowsdata}})],1),e._v(\" \"),n(\"el-dialog\",{attrs:{title:\"保存路线\",visible:e.dialogSave,width:\"30%\"},on:{\"update:visible\":function(t){e.dialogSave=t}}},[n(\"el-form\",{ref:\"SaveRoute\",attrs:{rules:e.rules1,model:e.SaveRoute}},[n(\"el-form-item\",{attrs:{label:\"路线名称\",prop:\"routeName\"}},[n(\"el-input\",{attrs:{placeholder:\"请填写方案名称\"},model:{value:e.SaveRoute.routeName,callback:function(t){e.$set(e.SaveRoute,\"routeName\",t)},expression:\"SaveRoute.routeName\"}})],1)],1),e._v(\" \"),n(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.submitForm1(\"SaveRoute\")}}},[e._v(\"确 定\")]),e._v(\" \"),n(\"el-button\",{on:{click:function(t){e.dialogSave=!1}}},[e._v(\"取 消\")])],1)],1),e._v(\" \"),n(\"el-dialog\",{attrs:{title:\"添加途径点\",visible:e.dialogVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[n(\"el-form\",{ref:\"chuan\",attrs:{rules:e.rules,model:e.chuan}},[n(\"el-form-item\",{attrs:{required:\"\",prop:\"startTime\",label:\"到站时间\"}},[n(\"el-time-select\",{attrs:{placeholder:\"到站时间\",\"picker-options\":{start:\"00:00\",step:\"00:15\",end:\"23:55\"}},model:{value:e.chuan.startTime,callback:function(t){e.$set(e.chuan,\"startTime\",t)},expression:\"chuan.startTime\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{required:\"\",prop:\"endTime\",label:\"离站时间\"}},[n(\"el-time-select\",{staticStyle:{\"padding-top\":\"10px\"},attrs:{placeholder:\"离站时间\",\"picker-options\":{start:\"00:00\",step:\"00:15\",end:\"23:55\"}},model:{value:e.chuan.endTime,callback:function(t){e.$set(e.chuan,\"endTime\",t)},expression:\"chuan.endTime\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{required:\"\",prop:\"objective\",label:\"此站目的\"}},[n(\"el-select\",{staticStyle:{\"padding-top\":\"10px\"},attrs:{clearable:\"\",placeholder:\"请选择此站点目的\"},on:{change:function(t){e.changeSite()}},model:{value:e.chuan.objective,callback:function(t){e.$set(e.chuan,\"objective\",t)},expression:\"chuan.objective\"}},[n(\"el-option\",{attrs:{label:\"取样\",value:\"取样\"}}),e._v(\" \"),n(\"el-option\",{attrs:{label:\"送样\",value:\"送样\"}}),e._v(\" \"),n(\"el-option\",{attrs:{label:\"送医废\",value:\"送医废\"}})],1)],1),e._v(\" \"),n(\"el-form-item\",{attrs:{required:\"\",prop:\"site\",label:\"此站站点\"}},[\"取样\"==e.chuan.objective?n(\"el-select\",{staticStyle:{\"padding-top\":\"10px\"},attrs:{clearable:\"\",filterable:\"\",placeholder:\"请选择采样点\"},model:{value:e.chuan.site,callback:function(t){e.$set(e.chuan,\"site\",t)},expression:\"chuan.site\"}},[n(\"el-option\",{key:\"待命\",attrs:{label:\"待命\",value:\"待命\"}}),e._v(\" \"),e._l(e.channel,function(e){return n(\"el-option\",{key:e.channelId,attrs:{label:e.channelName,value:e.channelName}})})],2):n(\"el-select\",{staticStyle:{\"padding-top\":\"10px\"},attrs:{clearable:\"\",filterable:\"\",placeholder:\"请选择实验室\"},model:{value:e.chuan.site,callback:function(t){e.$set(e.chuan,\"site\",t)},expression:\"chuan.site\"}},e._l(e.lab,function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.realName,value:e.realName}})}))],1),e._v(\" \"),n(\"div\",{staticStyle:{\"padding-top\":\"10px\"}},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.submitForm(\"chuan\")}}},[e._v(\"确 定\")]),e._v(\" \"),n(\"el-button\",{on:{click:function(t){e.close()}}},[e._v(\"取 消\")])],1)],1)],1),e._v(\" \"),n(\"el-dialog\",{attrs:{title:\"请添加关键点\",visible:e.dialogPanKong,width:\"30%\"},on:{\"update:visible\":function(t){e.dialogPanKong=t}}},[n(\"el-form\",[n(\"el-form-item\",[n(\"el-link\",{attrs:{type:\"danger\"}},[e._v(\"请添加关键转运点后再保存\")])],1)],1),e._v(\" \"),n(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.dialogPanKong=!1}}},[e._v(\"确 定\")])],1)],1)],1)},[],!1,null,\"205fe954\",null);m.options.__file=\"add.vue\";t.default=m.exports},GQeE:function(e,t,n){e.exports={default:n(\"iq4v\"),__esModule:!0}},KTTK:function(e,t,n){\"use strict\";var a=n(\"t3Un\");t.a={getChannelNameList:function(){return Object(a.a)({url:\"http://localhost:8070/lis_appointment_war_exploded/admin/channel/getChannelNameList.hn\",method:\"get\"})},getAllCity:function(){return Object(a.a)({url:\"/admin/common/getAllCity\",method:\"post\"})},getAllArea:function(){return Object(a.a)({url:\"/admin/common/getAllArea\",method:\"get\"})},getAllChannel:function(e){return Object(a.a)({url:\"/admin/common/getAllChannel/\"+e,method:\"post\"})},getPhone:function(e){return Object(a.a)({url:\"/admin/common/getPhone\",method:\"get\",params:{samplingLeader:e}})},getAllLab:function(e){return Object(a.a)({url:\"/admin/common/getAllLab/\"+e,method:\"get\"})},getAllLeader:function(){return Object(a.a)({url:\"/admin/common/getAllLeader\",method:\"get\"})},getAllpaytype:function(){return Object(a.a)({url:\"/admin/common/getAllPaytype\",method:\"get\"})},getAllsource:function(){return Object(a.a)({url:\"/admin/common/getAllSource\",method:\"get\"})}}},Mqbl:function(e,t,n){var a=n(\"JB68\"),o=n(\"w6GO\");n(\"zn7N\")(\"keys\",function(){return function(e){return o(a(e))}})},\"gDS+\":function(e,t,n){e.exports={default:n(\"oh+g\"),__esModule:!0}},iq4v:function(e,t,n){n(\"Mqbl\"),e.exports=n(\"WEpk\").Object.keys},ntmb:function(e,t,n){\"use strict\";var a=n(\"2vCt\");n.n(a).a},\"oh+g\":function(e,t,n){var a=n(\"WEpk\"),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},reOz:function(e,t,n){\"use strict\";var a=n(\"t3Un\");t.a={getList:function(e,t,n){return Object(a.a)({url:\"/admin/route/showRoute/\"+e+\"/\"+t,method:\"post\",data:n})},getCarById:function(e){return Object(a.a)({url:\"/admin/classes-car-info/getCarById/\"+e,method:\"post\"})},saveCar:function(e){return Object(a.a)({url:\"/admin/classes-car-info/saveCar\",method:\"post\",data:e})},updateCar:function(e){return Object(a.a)({url:\"/admin/classes-car-info/updateCar\",method:\"post\",data:e})},deleteCar:function(e){return Object(a.a)({url:\"/admin/classes-car-info/deleteCar/\"+e,method:\"post\"})},selectAllChannel:function(e){return Object(a.a)({url:\"/admin/common/getAllChannel/\"+e,method:\"get\"})},selectAllLab:function(){return Object(a.a)({url:\"/admin/common/getAllLab\",method:\"get\"})},saveRoute:function(e){return Object(a.a)({url:\"/admin/route/saveRoute\",method:\"post\",data:e})},saveSchedule:function(e){return Object(a.a)({url:\"/admin/route/saveSchedule\",method:\"post\",data:e})},getRouteById:function(e){return Object(a.a)({url:\"/admin/route/getRouteById/\"+e,method:\"post\"})},getScheduleById:function(e){return Object(a.a)({url:\"/admin/route/getScheduleById/\"+e,method:\"post\"})},deleteRouteById:function(e){return Object(a.a)({url:\"/admin/route/deleteRouteById/\"+e,method:\"post\"})},getAllRoute:function(){return Object(a.a)({url:\"/admin/route/getAllRoute\",method:\"get\"})},getScheduleTimeById:function(e){return Object(a.a)({url:\"/admin/route/getScheduleTimeById/\"+e,method:\"post\"})}}},zn7N:function(e,t,n){var a=n(\"Y7ZC\"),o=n(\"WEpk\"),i=n(\"KUxP\");e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],l={};l[e]=t(n),a(a.S+a.F*i(function(){n(1)}),\"Object\",l)}}}]);","extractedComments":[]}